# –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Å Arduino –Ω–∞ PlatformIO

## –î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
21 –Ω–æ—è–±—Ä—è 2024

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–æ–¥ –∏–∑ Arduino Studio –ø–æ–¥ PlatformIO –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –ø–∞–ø–∫—É `src/`.

–ò—Å—Ç–æ—á–Ω–∏–∫: Pull Request #17 - https://github.com/GOODWORKRINKZ/esp32line/pull/17

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–¥–∞
- **–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª**: `line_robot_main.ino` (685 —Å—Ç—Ä–æ–∫)
- **–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª**: `src/main.cpp` (687 —Å—Ç—Ä–æ–∫)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `#include <Arduino.h>` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ—Å–ª–µ include
  - –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PlatformIO

**–ë—ã–ª–æ** (`platformio.ini` –¥–ª—è ESP32-CAM):
```ini
[env:esp32cam]
platform = espressif32
board = esp32cam
framework = arduino
monitor_speed = 115200
upload_speed = 921600

lib_deps = 
    https://github.com/me-no-dev/ESPAsyncWebServer.git
    https://github.com/me-no-dev/AsyncTCP.git

build_flags = 
    -DBOARD_HAS_PSRAM
    -DARDUINO_ESP32_DEV
    -DCORE_DEBUG_LEVEL=0

board_build.partitions = huge_app.csv
```

**–°—Ç–∞–ª–æ** (`platformio.ini` –¥–ª—è ESP32 DevKit):
```ini
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Line-following robot with TCRT5000 sensors and L298N motor driver
; No external libraries required - uses standard Arduino framework
```

**–ü—Ä–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
- –†–æ–±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ESP32 DevKit, –∞ –Ω–µ ESP32-CAM
- –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∫–∞–º–µ—Ä—ã (ESPAsyncWebServer, AsyncTCP)
- –ù–µ –Ω—É–∂–Ω—ã —Ñ–ª–∞–≥–∏ PSRAM –∏ custom partition table
- –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Arduino framework

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–§–∞–π–ª—ã ESP32-CAM –ø—Ä–æ–µ–∫—Ç–∞ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã):**
- `src/main_camera_backup.cpp` - –∫–æ–¥ ESP32-CAM
- `README_camera_backup.md` - README ESP32-CAM –ø—Ä–æ–µ–∫—Ç–∞

**–§–∞–π–ª—ã Arduino –≤–µ—Ä—Å–∏–∏ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã):**
- `line_robot_main.ino` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Arduino —Ñ–∞–π–ª

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π README.md** —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º:
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è PlatformIO
- –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ª–∏–Ω–µ–π–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞
- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PID –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```
esp32line/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp                    # ‚úÖ –ù–æ–≤—ã–π PlatformIO –∫–æ–¥ (687 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ main_camera_backup.cpp      # üíæ Backup ESP32-CAM –∫–æ–¥–∞
‚îú‚îÄ‚îÄ platformio.ini                   # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è ESP32 DevKit
‚îú‚îÄ‚îÄ line_robot_main.ino              # üíæ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Arduino —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ README.md                        # ‚úÖ –ù–æ–≤—ã–π README –¥–ª—è line-—Ä–æ–±–æ—Ç–∞
‚îú‚îÄ‚îÄ README_camera_backup.md          # üíæ Backup camera README
‚îú‚îÄ‚îÄ MIGRATION_NOTES.md               # üìù –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ ... (–æ—Å—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –ñ–µ–ª–µ–∑–æ:
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: ESP32 DevKit (–æ–±—ã—á–Ω—ã–π ESP32, –Ω–µ CAM –≤–µ—Ä—Å–∏—è)
- **–î–∞—Ç—á–∏–∫–∏ –ª–∏–Ω–∏–∏**: 5√ó TCRT5000 (—Ü–∏—Ñ—Ä–æ–≤—ã–µ IR –¥–∞—Ç—á–∏–∫–∏)
- **–î—Ä–∞–π–≤–µ—Ä –º–æ—Ç–æ—Ä–æ–≤**: L298N (—Å –ø—Ä–∏–ø–∞—è–Ω–Ω—ã–º–∏ Enable –ø–∏–Ω–∞–º–∏)
- **–≠–Ω–∫–æ–¥–µ—Ä—ã**: 2√ó FC-03 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ `#define USE_ENCODERS`)
- **–ú–æ—Ç–æ—Ä—ã**: 2√ó DC –º–æ—Ç–æ—Ä—ã —Å —Ä–µ–¥—É–∫—Ç–æ—Ä–æ–º
- **–ü–∏—Ç–∞–Ω–∏–µ**: 7.4V Li-Po 2S

### GPIO —Ä–∞—Å–ø–∏–Ω–æ–≤–∫–∞:
- **–î–∞—Ç—á–∏–∫–∏ –ª–∏–Ω–∏–∏**: GPIO 32, 33, 25, 26, 27
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏**: GPIO 12-15 (IN1-IN4)
- **–≠–Ω–∫–æ–¥–µ—Ä—ã**: GPIO 16, 17

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ–±–æ—Ç–∞:
- **–ö–æ–ª–µ—Å–Ω–∞—è –±–∞–∑–∞**: 125 –º–º
- **–î–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å**: 65-70 –º–º
- **–®–∞–≥ –¥–∞—Ç—á–∏–∫–æ–≤**: 15 –º–º
- **–í—ã—Å–æ—Ç–∞ –¥–∞—Ç—á–∏–∫–æ–≤**: 4-5 –º–º
- **–ì–∞–±–∞—Ä–∏—Ç—ã**: ~180√ó140 –º–º (—Ä–µ–≥–ª–∞–º–µ–Ω—Ç 150√ó200 –º–º)

## –ö–∞–∫ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

### –ß–µ—Ä–µ–∑ PlatformIO CLI:
```bash
# –°–±–æ—Ä–∫–∞
pio run

# –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ ESP32
pio run --target upload

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pio device monitor
```

### –ß–µ—Ä–µ–∑ VS Code + PlatformIO:
1. –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ VS Code
2. PlatformIO: Build
3. PlatformIO: Upload
4. PlatformIO: Serial Monitor

## –û—Ç–ª–∏—á–∏—è –æ—Ç Arduino IDE

| –ê—Å–ø–µ–∫—Ç | Arduino IDE | PlatformIO |
|--------|-------------|------------|
| –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ | `.ino` | `.cpp` |
| Include Arduino.h | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é |
| –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ | –ü–∞–ø–∫–∞ `src/` |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | `boards.txt` | `platformio.ini` |
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ | Arduino Library Manager | `lib_deps` –≤ platformio.ini |

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**:
- –§–∞–π–ª `src/main.cpp` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç 687 —Å—Ç—Ä–æ–∫
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: `#include <Arduino.h>`
- –§—É–Ω–∫—Ü–∏–∏ `setup()` –∏ `loop()` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –í—Å–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- `platformio.ini` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è `esp32dev`
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–∞–∫ backup

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ö–æ–¥ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è** - —ç—Ç–æ —á–∏—Å—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏
2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `.ino` —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω
3. **–î–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –æ–¥–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**:
   - ESP32-CAM (camera-based) - –≤ backup —Ñ–∞–π–ª–∞—Ö
   - ESP32 DevKit (sensor-based) - –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PlatformIO
2. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç
3. –°–æ–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `pio run`
4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ ESP32
5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ —Å—Ö–µ–º–µ
6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `s` –≤ Serial Monitor

## –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- [LINE_ROBOT_GUIDE_RU.md](LINE_ROBOT_GUIDE_RU.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [ROBOT_GEOMETRY.md](ROBOT_GEOMETRY.md) - –ì–µ–æ–º–µ—Ç—Ä–∏—è —Ä–æ–±–æ—Ç–∞
- [LINE_ROBOT_WIRING.md](LINE_ROBOT_WIRING.md) - –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- [PID_TUNING_GUIDE_RU.md](PID_TUNING_GUIDE_RU.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ü–ò–î
- [ENCODERS_ANALYSIS.md](ENCODERS_ANALYSIS.md) - –ê–Ω–∞–ª–∏–∑ —ç–Ω–∫–æ–¥–µ—Ä–æ–≤

---

**–ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞**: 21 –Ω–æ—è–±—Ä—è 2024  
**–ê–≤—Ç–æ—Ä**: Copilot  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
