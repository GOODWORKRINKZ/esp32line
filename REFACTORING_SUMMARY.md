# –°–≤–æ–¥–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## –ó–∞–¥–∞—á–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @GOODWORKRINKZ –ø–æ–ø—Ä–æ—Å–∏–ª:
1. –£–¥–∞–ª–∏—Ç—å `main_camera_backup.cpp`
2. –†–∞–∑–¥–µ–ª–∏—Ç—å –±–æ–ª—å—à–æ–π `main.cpp` –Ω–∞ –º–æ–¥—É–ª–∏
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã SOLID, KISS, DRY

## –í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚úÖ

### 1. –£–¥–∞–ª–µ–Ω –ª–∏—à–Ω–∏–π –∫–æ–¥
- ‚ùå –£–¥–∞–ª–µ–Ω `main_camera_backup.cpp` (37 –ö–ë, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### 2. –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–°–æ–∑–¥–∞–Ω–æ **6 –∫–ª–∞—Å—Å–æ–≤** –≤ **12 —Ñ–∞–π–ª–∞—Ö** (896 —Å—Ç—Ä–æ–∫):

| –ú–æ–¥—É–ª—å | –°—Ç—Ä–æ–∫–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|--------|--------|-----------------|
| **Config.h** | 76 | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã |
| **Sensors** | 130 | –î–∞—Ç—á–∏–∫–∏ –ª–∏–Ω–∏–∏ TCRT5000 |
| **Motors** | 97 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏ L298N |
| **PIDController** | 74 | –ü–ò–î-—Ä–µ–≥—É–ª—è—Ç–æ—Ä |
| **Encoders** | 125 | –≠–Ω–∫–æ–¥–µ—Ä—ã FC-03 |
| **LineFollower** | 233 | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| **main.cpp** | 161 | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ |

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

#### SOLID ‚úÖ

**S - Single Responsibility**
- `LineSensors` - —Ç–æ–ª—å–∫–æ –¥–∞—Ç—á–∏–∫–∏
- `Motors` - —Ç–æ–ª—å–∫–æ –º–æ—Ç–æ—Ä—ã
- `PIDController` - —Ç–æ–ª—å–∫–æ –ü–ò–î
- `Encoders` - —Ç–æ–ª—å–∫–æ —ç–Ω–∫–æ–¥–µ—Ä—ã
- `LineFollower` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è

**O - Open/Closed**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –¥–∞—Ç—á–∏–∫–∞
- –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –ü–ò–î
- –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

**L - Liskov Substitution**
- –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- –ù–µ—Ç —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
- Null Object –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –æ–ø—Ü–∏–π

**I - Interface Segregation**
- –£–∑–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- –ú–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª

**D - Dependency Inversion**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- –ò–Ω–≤–µ—Ä—Å–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

#### KISS ‚úÖ

- –ü—Ä–æ—Å—Ç—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ß–µ—Ç–∫–∏–µ –∏–º–µ–Ω–∞
- –ú–∏–Ω–∏–º—É–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

#### DRY ‚úÖ

- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–±—ã–ª–æ 2)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

## –£–ª—É—á—à–µ–Ω–∏—è –∫–æ–¥–∞

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```cpp
// main.cpp (687 —Å—Ç—Ä–æ–∫)
// - –í—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
// - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
// - –£—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤–µ–∑–¥–µ
// - –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```cpp
// main.cpp (161 —Å—Ç—Ä–æ–∫–∞) - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
#include "LineFollower.h"

LineSensors sensors;
Motors motors;
PIDController pid;
Encoders encoders;
LineFollower robot(sensors, motors, pid, &encoders);

void setup() {
    robot.begin();
}

void loop() {
    robot.update();
}
```

### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ï–¥–∏–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä LineFollower**
   ```cpp
   // –ë—ã–ª–æ: 2 –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Å —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π
   #ifdef USE_ENCODERS
   LineFollower(s, m, p, e);
   #else
   LineFollower(s, m, p);
   #endif
   
   // –°—Ç–∞–ª–æ: 1 –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
   LineFollower(s, m, p, e = nullptr);
   ```

2. **Null Object –ø–∞—Ç—Ç–µ—Ä–Ω**
   ```cpp
   // –í–º–µ—Å—Ç–æ —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
   if (encoders) {
       encoders->update();
   }
   ```

3. **Dependency Injection**
   ```cpp
   // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑–≤–Ω–µ
   LineFollower robot(sensors, motors, pid, &encoders);
   ```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –§–∞–π–ª–æ–≤ | 2 | 13 | +11 –º–æ–¥—É–ª–µ–π |
| –°—Ç—Ä–æ–∫ –≤ main.cpp | 687 | 161 | **-76%** |
| –ö–ª–∞—Å—Å–æ–≤ | 0 | 6 | +6 |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | –î–∞ | –ù–µ—Ç | ‚úÖ |
| –£—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è | –í–µ–∑–¥–µ | –¢–æ–ª—å–∫–æ Config/Encoders | ‚úÖ |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | ‚úÖ |

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –ú–æ–∫–∏ –∏ –∑–∞–≥–ª—É—à–∫–∏ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞

### 2. –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- –ü—Ä–æ–±–ª–µ–º—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### 3. –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –¥–∞—Ç—á–∏–∫ ‚Üí —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
- –ò–∑–º–µ–Ω–∏—Ç—å –ü–ò–î ‚Üí –∏–∑–º–µ–Ω–∏—Ç—å PIDController
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é ‚Üí —Å–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å

### 4. –ü–æ–Ω—è—Ç–Ω–æ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤
- –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –¥–µ–ª–∞–µ—Ç –æ–¥–Ω–æ
- –†—É—Å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **ARCHITECTURE.md** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **README.md** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **REFACTORING_SUMMARY.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## –ö–æ–º–º–∏—Ç—ã

1. `affa27e` - –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –º–æ–¥—É–ª–∏
2. `18fdb35` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ README
3. `fe40b6e` - –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (DRY)
4. `e8ad0d2` - –£–¥–∞–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- –£–¥–∞–ª–µ–Ω `main_camera_backup.cpp`
- –ö–æ–¥ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –º–æ–¥—É–ª–∏
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã SOLID, KISS, DRY

–ö–æ–¥ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω—ã–π
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º—ã–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, —á–∏—Å—Ç—ã–π –∫–æ–¥, –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤–∏—Ç–∏—é! üéâ
